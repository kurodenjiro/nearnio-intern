generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Listing {
  id                 Int       @id
  sequentialId       Int?
  title              String
  rewardAmount       Float
  token              String
  deadline           DateTime
  type               String
  status             String
  slug               String    @unique
  isWinnersAnnounced Boolean   @default(false)
  isFeatured         Boolean   @default(false)
  compensationType   String
  minRewardAsk       Float?
  maxRewardAsk       Float?
  winnersAnnouncedAt DateTime?
  commentsCount      Int       @default(0)
  submissionCount    Int       @default(0)
  description        String?
  skills             Json?     @db.Json
  mappedCategory     String?
  sponsorName        String
  sponsorSlug        String
  sponsorLogo        String
  sponsorIsVerified  Boolean   @default(false)
  sponsorSt          Boolean   @default(false)
  createdAt          DateTime  @default(now())
  updatedAt          DateTime  @updatedAt
  syncedAt           DateTime  @default(now())

  @@map("listings")
}

model UserPreference {
  id          Int      @id @default(autoincrement())
  userId      BigInt   @unique
  chatId      BigInt
  categories  String[]
  minBounty   Float
  maxBounty   Float?
  projectType String   @default("bounty")
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("user_preferences")
}

model NotificationLog {
  id        Int      @id @default(autoincrement())
  userId    BigInt
  listingId Int
  sentAt    DateTime @default(now())
  success   Boolean  @default(true)
  error     String?

  @@map("notification_logs")
}

model SystemConfig {
  id        Int      @id @default(autoincrement())
  key       String   @unique
  value     String
  updatedAt DateTime @updatedAt

  @@map("system_config")
}

model UserReminder {
  id          Int      @id @default(autoincrement())
  userId      BigInt
  listingId   Int
  listingSlug String
  title       String
  deadline    DateTime
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@unique([userId, listingId])
  @@map("user_reminders")
}
